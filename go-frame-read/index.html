<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <meta name="author" content="ihaiu" />
    <title>熟悉服务器代码go框架</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/stylesheets/github-light.css" media="screen">
    <link type="text/css" rel="stylesheet" href="/stylesheets/offlintab-439.css">
    <link type="stylesheet" rel="stylesheet" href="/stylesheets/font-awesome.min.css">
    <!-- <link type="stylesheet" rel="stylesheet" href="/stylesheets/about-grid.css"> -->


    <!-- <link href="/feed/" rel="alternate" title="ihaiu" type="application/atom+xml" /> -->

    <link rel="shortcut icon" href="/assets/icon/favicon.ico" />

    <link href="/assets/icon/favicon.ico" type="image/x-icon" rel="shortcut icon bookmark" />
    <link rel="apple-touch-icon-precomposed" href="assets/icon/icon32.png">
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/assets/icon/icon76.png">
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/assets/icon/icon120.png">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/assets/icon/icon152.png">

  <!-- 
  <script src="http://www.it165.net/statics/js//it165_pro.js" type="text/javascript"></script>
  <script type="text/javascript">SyntaxHighlighter.all();</script>
  -->


           
    <script type="text/javascript" src="/media/syntaxhighlighter_2.0.278/scripts/shCore.js"></script>
    <link type="text/css" rel="stylesheet" href="/media/syntaxhighlighter_2.0.278/styles/shCore.css"/>
    <link type="text/css" rel="stylesheet" href="/media/syntaxhighlighter_2.0.278/styles/shThemeDefault.css"/>


      

      

      

      

      
      <script type="text/javascript" src="/media/syntaxhighlighter_2.0.278/scripts/shBrushCpp.js"></script>
      

      
      <script type="text/javascript" src="/media/syntaxhighlighter_2.0.278/scripts/shBrushCSharp.js"></script>
      

      

      

      

      

      

      


      

      
      

      

      

      

      

      

      

      

      

      

      

      



    <script type="text/javascript">SyntaxHighlighter.all();</script>


   

  </head>

  <body>
    <section class="page-header">
      <a href="http://www.ihaiu.com" class="iconbtn"><h1 style="background-image: url('/assets/icon/icon76_white.png'); background-position: center center; background-repeat:no-repeat; height:76px; margin:0px;"></h1></a>
      <a href="http://www.ihaiu.com" class="iconbtn"><h1 class="project-name" >爱海游</h1></a>
      <h2 class="project-tagline">ihaiu.com</h2>
      <a href="/#content" class="btn">目录</a>
      <a href="/categories/#content" class="btn">分类</a>
     <!--  <a href="/guestbook/#content" class="btn">留言</a> -->
     <!--  <a href="/about/#content" class="btn">关于</a> -->
      <a href="/opensource/#content" class="btn">开源分享</a>
      <a href="/share/#content" class="btn">分享</a>
     <!--  <a href="/share/gameart#content" class="btn">游戏美术</a> -->
      <a href="/friendlylink/#content" class="btn">友情链接</a>
    </section>





    <section class="main-content" id="content">

      <h1>熟悉服务器代码go框架</h1>
      <article class="content">
        <section class="meta">
<span class="time">
  <time datetime="2020-05-25">2020-05-25</time>
</span>

 | 
<span class="categories">
  发布
  <a href="tencent://message/?uin=593705098" title="发布:大海明月 QQ:593705098" rel="author">大海明月</a>&nbsp;
  
  <a href="mailto:zengfeng75@qq.com" title="发布:大海明月 Email:zengfeng75@qq.com" rel="author">zengfeng75@qq.com</a>&nbsp;
  
</span>



 | 
<span class="categories">
  分类
  
  <a href="/categories/#工具" title="工具">工具</a>&nbsp;
  
</span>


 | 
<span class="tags">
  标签
  
  <a href="/tags/#熟悉服务器代码go框架" title="熟悉服务器代码go框架">熟悉服务器代码go框架</a>&nbsp;
  
</span>

</section>
<section class="post">
<h1 id="go框架">go框架</h1>

<table>
  <thead>
    <tr>
      <th>K</th>
      <th>W</th>
      <th>H</th>
      <th>L</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>What do I know？</td>
      <td>What do I want to know？</td>
      <td>How I will learn？</td>
      <td>What I have learned？</td>
    </tr>
    <tr>
      <td>我知道些什么？</td>
      <td>我想要知道些什么？</td>
      <td>我该如何去学习？</td>
      <td>我学到了什么？</td>
    </tr>
    <tr>
      <td>Know</td>
      <td>Want</td>
      <td>How</td>
      <td>Learned</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>目录结构？</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>启动服务器流程？</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>有哪些配置？负责做什么？</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>redis数据库怎么使用？</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>redis lua脚本怎么使用?</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>sync.RWMutex 互斥锁怎么使用？</td>
      <td>https://studygolang.com/pkgdoc</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>defer 作用？</td>
      <td>https://xiaozhou.net/something-about-defer-2014-05-25.html<br />https://blog.csdn.net/huang_yong_peng/article/details/82950743</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>parser 协议解析</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>reflect 反射</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="目录">目录</h1>

<p>[TOC]</p>

<h1 id="问题">问题</h1>

<h5 id="目录结构">目录结构？</h5>

<p>xserver</p>

<table>
  <tbody>
    <tr>
      <td>–conf     配置文件,进程启动配置、秘钥key</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
    </tr>
  </tbody>
</table>

<h1 id="配置">配置</h1>

<p>ServerCmd: 启动进程时cmd输入的参数</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>message ServerCmd
{
	string path = 1;
	string globalPath = 2;
	string logPath  = 3;
	string logSign = 4;
	bool daemon = 5;
	bool lan  = 6;
}
</code></pre></div></div>

<p>ServerInfo</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>message ServerInfo
{
   int32 id = 1;         //服务器id
   string name = 3;   //服务器名称
   string cmdAddr = 4;    //命令行绑定地址
   string rpcAddr = 5;    //rpc绑定地址
   string extAddr = 6;    //对外服务器地址
   int64 lastTick = 7;    //最后心跳
   string type = 8;
   int32 load = 9;    //负载
   string conf = 10;//配置文件
   int32 onlineCount = 11;//在线玩家
   string md5 = 12;
   string pbVer = 13;
}
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>message ServerWarn
{
   repeated int32 badRpc = 1;  
   int64 lastPanic = 2;
   int32 panicCount = 3;
   bool  goScale = 4;//goroutine比例是否失衡
}
</code></pre></div></div>

<p>Config</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Server *configServer
Global *configGlobal
Doc    *ConfigDoc
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//服务器配置
type configServer struct {
	Id        int32
	Type      string
	Name      string
	Net       *configServerNet
	Subscribe []int32
}
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//服务器网络配置
type configServerNet struct {
   Rpc      string
   Cmd      string
   Ext      string
   ExtIpUrl string
   Timeout  int
}
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type configGlobal struct {
   LoginVersion         string //登陆版本
   LoginVersionSwitch   bool   //版本检查开关
   GamerCountPerRedis   int32  //每台redis玩家数量
   LoginSessionTimeout  int32  //登陆session保存时间
   MaxCacheGamer        int32  //最大缓存玩家数量
   MinGamerId           int32
   NeedCDKSwitch      bool    //cdk开关
   ProfSwitch           bool     //性能监视开关
   LogUploadUrl         string   //日志上传url
   LogFormField         string   //日志上传filed
   HTTPLogUploadUrl    string   //HTTP日志上传url
   MsgqueCountBuffer    int32    //msgque缓冲数量
   GoroutineCountBuffer int32    //goroutin缓冲数量
   RedisPoolSize        int32    //redis链接池大小
   Timezone             int32    //时区
   Redis                []string //redis
   FastAuthWhiteList    []string
   FastAuthCheckSwitch  bool
   Proto                string
   LogLevel             string //日志等级
   MaxLogFileSize       int    //日志文件最大size，单位MB
   SSLCrtPath           string
   SSLKeyPath           string
   WWWDir               string //www文件目录
   WWWUrl               string //wwwurl路径
   Compress             bool
   Pvp                  *configPVP
   WXId                 string
   WXSec                string
   GMSwitch          bool //GM开关
}
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type configPVP struct {
   PvpMaxObSize        int
   PvpFrameDelta       int
   PvpMinFrameDelta    int
   PvpFrameDeltaScale  int
   PvpThreadRecv       bool
   PvpInputDelta       int
   PvpStartWaitTimeout int
   PvpAllAIExit        bool
   PvpResultCheck      bool
   PvpMaxKeepTime      int
}
</code></pre></div></div>

</section>
<section class="page">

	 
  <span><a href="/fqsz/#content" class="pageNav"  >上一篇: 番茄时钟</a></span>
  <br/>
  

  
	<span><a href="/ktcz/#content" class="pageNav"  >下一篇: 卡通材质</a></span>
   

</section>


<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script>
  var cloudTieConfig = {
    url: document.location.href, 
    sourceId: "2017022112510000",
    productKey: "97dc4b8e4aeb41ca8606d2c6efa6eae3",
    target: "cloud-tie-wrapper"
  };
</script>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>


      </article>


      <footer class="site-footer">

          <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?aa2fdee733dec8a2399b5bc0efbfd843";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

        <span class="site-footer-credits"><a href="http://www.ihaiu.com">爱海游</a></span> |
        <span class="site-footer-credits"><a href="http://blog.ihaiu.com">博客</a></span> |

        <script src="http://s4.cnzz.com/z_stat.php?id=1260003113&web_id=1260003113" language="JavaScript"></script>

        <p align="center">版权所有：©2021 ihaiu.com 版权所有ICP证： <a href="https://beian.miit.gov.cn/" target="_blank">沪ICP备2021002336号</a></p>
      </footer>

    </section>


  
  </body>
</html>


